Repository: plone.app.upgrade


Branch: refs/heads/1.x
Date: 2018-01-30T18:37:02+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/38558e394ee28ca7b5d64891e97e323bccfb505a

Import from Products.PlonePAS.setuphandlers instead of Extensions/Install.py.

Requires Products.PlonePAS 5.0.1 or higher.

Files changed:
M CHANGES.rst
M plone/app/upgrade/v30/alphas.py
M plone/app/upgrade/v30/betas.py
M plone/app/upgrade/v43/final.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 66485bce..7ef30201 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Import from ``Products.PlonePAS.setuphandlers`` instead of ``Extensions/Install.py``.
+  [maurits]
 
 
 1.4.3 (2017-09-08)
diff --git a/plone/app/upgrade/v30/alphas.py b/plone/app/upgrade/v30/alphas.py
index 1fe1d9ef..7ce54faa 100644
--- a/plone/app/upgrade/v30/alphas.py
+++ b/plone/app/upgrade/v30/alphas.py
@@ -404,7 +404,7 @@ def updateMemberSecurity(context):
 
 
 def updatePASPlugins(context):
-    from Products.PlonePAS.Extensions.Install import activatePluginInterfaces
+    from Products.PlonePAS.setuphandlers import activatePluginInterfaces
 
     portal = getToolByName(context, 'portal_url').getPortalObject()
 
diff --git a/plone/app/upgrade/v30/betas.py b/plone/app/upgrade/v30/betas.py
index 48f7077c..c0297a73 100644
--- a/plone/app/upgrade/v30/betas.py
+++ b/plone/app/upgrade/v30/betas.py
@@ -94,7 +94,7 @@ def cleanDefaultCharset(context):
 
 
 def addAutoGroupToPAS(context):
-    from Products.PlonePAS.Extensions.Install import activatePluginInterfaces
+    from Products.PlonePAS.setuphandlers import activatePluginInterfaces
 
     portal = getToolByName(context, 'portal_url').getPortalObject()
     sout = StringIO()
diff --git a/plone/app/upgrade/v43/final.py b/plone/app/upgrade/v43/final.py
index bdc4ba34..bad22f87 100644
--- a/plone/app/upgrade/v43/final.py
+++ b/plone/app/upgrade/v43/final.py
@@ -44,7 +44,7 @@ def removePersistentKSSMimeTypeImportStep(context):
 
 def addDefaultPlonePasswordPolicy(context):
     portal = getToolByName(context, 'portal_url').getPortalObject()
-    from Products.PlonePAS.Extensions.Install import setupPasswordPolicyPlugin
+    from Products.PlonePAS.setuphandlers import setupPasswordPolicyPlugin
     setupPasswordPolicyPlugin(portal)
 
 
diff --git a/setup.py b/setup.py
index de8dd699..287c8421 100644
--- a/setup.py
+++ b/setup.py
@@ -73,7 +73,7 @@
         'Products.GenericSetup>=1.8.1',
         'Products.MimetypesRegistry',
         # 'Products.PloneLanguageTool',
-        'Products.PlonePAS',
+        'Products.PlonePAS >= 5.0.1',
         'Products.PluggableAuthService',
         'Products.PortalTransforms',
         'Products.ResourceRegistries',


Repository: plone.app.upgrade


Branch: refs/heads/1.x
Date: 2018-01-30T21:54:55+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/095c91f5fceada3becf1fdadff3bf735abc2ff15

Merge pull request #149 from plone/plonepas-canonical-import-1x

Import PlonePAS.setuphandlers instead of Extensions/Install.py

Files changed:
M CHANGES.rst
M plone/app/upgrade/v30/alphas.py
M plone/app/upgrade/v30/betas.py
M plone/app/upgrade/v43/final.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 66485bce..7ef30201 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Import from ``Products.PlonePAS.setuphandlers`` instead of ``Extensions/Install.py``.
+  [maurits]
 
 
 1.4.3 (2017-09-08)
diff --git a/plone/app/upgrade/v30/alphas.py b/plone/app/upgrade/v30/alphas.py
index 1fe1d9ef..7ce54faa 100644
--- a/plone/app/upgrade/v30/alphas.py
+++ b/plone/app/upgrade/v30/alphas.py
@@ -404,7 +404,7 @@ def updateMemberSecurity(context):
 
 
 def updatePASPlugins(context):
-    from Products.PlonePAS.Extensions.Install import activatePluginInterfaces
+    from Products.PlonePAS.setuphandlers import activatePluginInterfaces
 
     portal = getToolByName(context, 'portal_url').getPortalObject()
 
diff --git a/plone/app/upgrade/v30/betas.py b/plone/app/upgrade/v30/betas.py
index 48f7077c..c0297a73 100644
--- a/plone/app/upgrade/v30/betas.py
+++ b/plone/app/upgrade/v30/betas.py
@@ -94,7 +94,7 @@ def cleanDefaultCharset(context):
 
 
 def addAutoGroupToPAS(context):
-    from Products.PlonePAS.Extensions.Install import activatePluginInterfaces
+    from Products.PlonePAS.setuphandlers import activatePluginInterfaces
 
     portal = getToolByName(context, 'portal_url').getPortalObject()
     sout = StringIO()
diff --git a/plone/app/upgrade/v43/final.py b/plone/app/upgrade/v43/final.py
index bdc4ba34..bad22f87 100644
--- a/plone/app/upgrade/v43/final.py
+++ b/plone/app/upgrade/v43/final.py
@@ -44,7 +44,7 @@ def removePersistentKSSMimeTypeImportStep(context):
 
 def addDefaultPlonePasswordPolicy(context):
     portal = getToolByName(context, 'portal_url').getPortalObject()
-    from Products.PlonePAS.Extensions.Install import setupPasswordPolicyPlugin
+    from Products.PlonePAS.setuphandlers import setupPasswordPolicyPlugin
     setupPasswordPolicyPlugin(portal)
 
 
diff --git a/setup.py b/setup.py
index de8dd699..287c8421 100644
--- a/setup.py
+++ b/setup.py
@@ -73,7 +73,7 @@
         'Products.GenericSetup>=1.8.1',
         'Products.MimetypesRegistry',
         # 'Products.PloneLanguageTool',
-        'Products.PlonePAS',
+        'Products.PlonePAS >= 5.0.1',
         'Products.PluggableAuthService',
         'Products.PortalTransforms',
         'Products.ResourceRegistries',



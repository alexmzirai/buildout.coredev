Repository: plone.app.event


Branch: refs/heads/master
Date: 2018-01-28T14:48:48+01:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.event/commit/651f14cd40de05703a772daf24d132a884f242dc

Language independence for fields: `start`, `end`, `whole_day`, `open_end`

Files changed:
M CHANGES.rst
M plone/app/event/dx/behaviors.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 8df1e547..1eb10972 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -29,6 +29,8 @@ Bug fixes:
 
 - Add Python 2 / 3 compatibility.
   [pbauer]
+- Language independence for fields: `start`, `end`, `whole_day`, `open_end`
+  [agitator]
 
 - iCalendar import: Fix usage of ``sync_uid``, which wasn't correctly implemented since plone.app.event 2.0.
   [thet]
diff --git a/plone/app/event/dx/behaviors.py b/plone/app/event/dx/behaviors.py
index d312fcd9..a5c3999c 100644
--- a/plone/app/event/dx/behaviors.py
+++ b/plone/app/event/dx/behaviors.py
@@ -39,6 +39,7 @@
 from zope.interface import invariant
 from zope.interface import provider
 from zope.schema.interfaces import IContextAwareDefaultFactory
+from plone.app.multilingual.dx.interfaces import ILanguageIndependentField
 
 
 def first_weekday_sun0():
@@ -320,6 +321,13 @@ class IEventContact(model.Schema):
 alsoProvides(IEventContact, IFormFieldProvider)
 
 
+# Language independent fields
+alsoProvides(IEventBasic['start'], ILanguageIndependentField)
+alsoProvides(IEventBasic['end'], ILanguageIndependentField)
+alsoProvides(IEventBasic['whole_day'], ILanguageIndependentField)
+alsoProvides(IEventBasic['open_end'], ILanguageIndependentField)
+
+
 # Attribute indexer
 
 # Start indexer
diff --git a/setup.py b/setup.py
index 568d3324..a618af44 100644
--- a/setup.py
+++ b/setup.py
@@ -48,6 +48,7 @@
         'plone.app.contentlisting',
         'plone.app.dexterity',
         'plone.app.layout',
+        'plone.app.multilingual',
         'plone.app.portlets >= 2.5.1',
         'plone.app.querystring',
         'plone.app.registry',


Repository: plone.app.event


Branch: refs/heads/master
Date: 2018-01-28T17:50:31+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.event/commit/5a2d864d6d510283be7f14caeb5682ab6e5cd6e0

Merge pull request #275 from plone/langindependence

Language independence for fields: `start`, `end`, `whole_day`, `open_end`

Files changed:
M CHANGES.rst
M plone/app/event/dx/behaviors.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 8df1e547..1eb10972 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -29,6 +29,8 @@ Bug fixes:
 
 - Add Python 2 / 3 compatibility.
   [pbauer]
+- Language independence for fields: `start`, `end`, `whole_day`, `open_end`
+  [agitator]
 
 - iCalendar import: Fix usage of ``sync_uid``, which wasn't correctly implemented since plone.app.event 2.0.
   [thet]
diff --git a/plone/app/event/dx/behaviors.py b/plone/app/event/dx/behaviors.py
index d312fcd9..a5c3999c 100644
--- a/plone/app/event/dx/behaviors.py
+++ b/plone/app/event/dx/behaviors.py
@@ -39,6 +39,7 @@
 from zope.interface import invariant
 from zope.interface import provider
 from zope.schema.interfaces import IContextAwareDefaultFactory
+from plone.app.multilingual.dx.interfaces import ILanguageIndependentField
 
 
 def first_weekday_sun0():
@@ -320,6 +321,13 @@ class IEventContact(model.Schema):
 alsoProvides(IEventContact, IFormFieldProvider)
 
 
+# Language independent fields
+alsoProvides(IEventBasic['start'], ILanguageIndependentField)
+alsoProvides(IEventBasic['end'], ILanguageIndependentField)
+alsoProvides(IEventBasic['whole_day'], ILanguageIndependentField)
+alsoProvides(IEventBasic['open_end'], ILanguageIndependentField)
+
+
 # Attribute indexer
 
 # Start indexer
diff --git a/setup.py b/setup.py
index 568d3324..a618af44 100644
--- a/setup.py
+++ b/setup.py
@@ -48,6 +48,7 @@
         'plone.app.contentlisting',
         'plone.app.dexterity',
         'plone.app.layout',
+        'plone.app.multilingual',
         'plone.app.portlets >= 2.5.1',
         'plone.app.querystring',
         'plone.app.registry',



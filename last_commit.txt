Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2018-01-30T18:29:06+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/fbac3e82be730ec944b4d21943a9df941e67d3cc

Import setupPasswordPolicyPlugin from canonical place in PlonePAS.

Files changed:
M CHANGES.rst
M plone/app/upgrade/v43/final.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 6c6decea..6e2a0dd3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,9 @@ New features:
 
 Bug fixes:
 
+- Import ``setupPasswordPolicyPlugin`` from canonical place in ``PlonePAS``.
+  [maurits]
+
 - Log progress and ignore bad catalog entries while updating catalog metadata.
   [davisagli]
 
diff --git a/plone/app/upgrade/v43/final.py b/plone/app/upgrade/v43/final.py
index 08750b42..13b9317f 100644
--- a/plone/app/upgrade/v43/final.py
+++ b/plone/app/upgrade/v43/final.py
@@ -44,7 +44,7 @@ def removePersistentKSSMimeTypeImportStep(context):
 
 def addDefaultPlonePasswordPolicy(context):
     portal = getToolByName(context, 'portal_url').getPortalObject()
-    from Products.PlonePAS.Extensions.Install import setupPasswordPolicyPlugin
+    from Products.PlonePAS.setuphandlers import setupPasswordPolicyPlugin
     setupPasswordPolicyPlugin(portal)
 
 
@@ -323,7 +323,7 @@ def removeFakeKupu(context):
 
 def addSortOnProperty(context):
     """Add sort_on field to search controlpanel.
-    
+
     The default value of this field is relevance.
     """
     site_properties = getToolByName(context, 'portal_properties').site_properties
diff --git a/setup.py b/setup.py
index 6c8ded82..65864d98 100644
--- a/setup.py
+++ b/setup.py
@@ -53,7 +53,7 @@
         'Products.CMFEditions',
         'Products.CMFQuickInstallerTool',
         'Products.GenericSetup>=1.8.1',
-        'Products.PlonePAS',
+        'Products.PlonePAS >= 5.0.1',
         'Products.PluggableAuthService',
         'Products.ZCatalog >= 2.13.4',
         'Zope2',


Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2018-01-30T23:41:10+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/dfe087d240b9620210f314029033a2193d551f1d

Merge pull request #148 from plone/plonepas-canonical-import-master

Import setupPasswordPolicyPlugin from canonical place in PlonePAS. [master]

Files changed:
M CHANGES.rst
M plone/app/upgrade/v43/final.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 6c6decea..6e2a0dd3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,9 @@ New features:
 
 Bug fixes:
 
+- Import ``setupPasswordPolicyPlugin`` from canonical place in ``PlonePAS``.
+  [maurits]
+
 - Log progress and ignore bad catalog entries while updating catalog metadata.
   [davisagli]
 
diff --git a/plone/app/upgrade/v43/final.py b/plone/app/upgrade/v43/final.py
index 08750b42..13b9317f 100644
--- a/plone/app/upgrade/v43/final.py
+++ b/plone/app/upgrade/v43/final.py
@@ -44,7 +44,7 @@ def removePersistentKSSMimeTypeImportStep(context):
 
 def addDefaultPlonePasswordPolicy(context):
     portal = getToolByName(context, 'portal_url').getPortalObject()
-    from Products.PlonePAS.Extensions.Install import setupPasswordPolicyPlugin
+    from Products.PlonePAS.setuphandlers import setupPasswordPolicyPlugin
     setupPasswordPolicyPlugin(portal)
 
 
@@ -323,7 +323,7 @@ def removeFakeKupu(context):
 
 def addSortOnProperty(context):
     """Add sort_on field to search controlpanel.
-    
+
     The default value of this field is relevance.
     """
     site_properties = getToolByName(context, 'portal_properties').site_properties
diff --git a/setup.py b/setup.py
index 6c8ded82..65864d98 100644
--- a/setup.py
+++ b/setup.py
@@ -53,7 +53,7 @@
         'Products.CMFEditions',
         'Products.CMFQuickInstallerTool',
         'Products.GenericSetup>=1.8.1',
-        'Products.PlonePAS',
+        'Products.PlonePAS >= 5.0.1',
         'Products.PluggableAuthService',
         'Products.ZCatalog >= 2.13.4',
         'Zope2',



Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2018-01-26T13:16:07+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.multilingual/commit/0356e371c17441de8e7bf0de6ff22340b7b010c3

Marked 'Scenario: As an editor I can translate a document' as noncritical.

This is a 'robot' test that has been unstable for a long time.
Create two extra screen shots in the unstable test, so we might get an idea why this goes wrong.

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/tests/robot/test_translate_content.robot
M src/plone/app/multilingual/tests/test_robot.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 1f42acaa..42c5621f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,10 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Marked 'Scenario: As an editor I can translate a document' as noncritical.
+  This is a 'robot' test that has been unstable for a long time.
+  [maurits]
+
 - Fix issue where rendering translation menu did write on get when translations
   were enabled on old site with existing content
   [datakurre]
diff --git a/src/plone/app/multilingual/tests/robot/test_translate_content.robot b/src/plone/app/multilingual/tests/robot/test_translate_content.robot
index adc0eb8f..55ae1dae 100644
--- a/src/plone/app/multilingual/tests/robot/test_translate_content.robot
+++ b/src/plone/app/multilingual/tests/robot/test_translate_content.robot
@@ -12,6 +12,7 @@ Test Teardown  Close all browsers
 *** Test Cases ***
 
 Scenario: As an editor I can translate a document
+    [Tags]  unstable
     Given a site owner
       and a document in English
      When I translate the document into Catalan
@@ -54,10 +55,12 @@ a document in English with Catalan translation
 
 I translate the document into Catalan
   Go to  ${PLONE_URL}/en/an-english-document/@@create_translation?language=ca
+  Capture page screenshot
   Input Text  form.widgets.IDublinCore.title  A Catalan Document
   Click Link  Dates  # workaround for of TinyMCE editor field problem
+  Capture page screenshot
   Click button  css=#form-buttons-save
-  
+
   # Wait until page contains  Element creat
   # (Catalan translations not currently available)
 
diff --git a/src/plone/app/multilingual/tests/test_robot.py b/src/plone/app/multilingual/tests/test_robot.py
index decbf2ca..d3b7b115 100644
--- a/src/plone/app/multilingual/tests/test_robot.py
+++ b/src/plone/app/multilingual/tests/test_robot.py
@@ -16,6 +16,8 @@ def test_suite():
     suite = unittest.TestSuite()
     suite.level = ROBOT_TEST_LEVEL
     suite.addTests([
-        layered(robotsuite.RobotTestSuite('robot'), layer=PAM_ROBOT_TESTING),
+        layered(
+            robotsuite.RobotTestSuite('robot', noncritical=['unstable']),
+            layer=PAM_ROBOT_TESTING),
     ])
     return suite


Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2018-01-27T00:50:21+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.multilingual/commit/f11cb80faf750f5740ab1ca013f2d24b0c3b0b58

Merge pull request #299 from plone/robot-translate-document-unstable-master

Marked robot test as noncritical

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/tests/robot/test_translate_content.robot
M src/plone/app/multilingual/tests/test_robot.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 1f42acaa..42c5621f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,10 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Marked 'Scenario: As an editor I can translate a document' as noncritical.
+  This is a 'robot' test that has been unstable for a long time.
+  [maurits]
+
 - Fix issue where rendering translation menu did write on get when translations
   were enabled on old site with existing content
   [datakurre]
diff --git a/src/plone/app/multilingual/tests/robot/test_translate_content.robot b/src/plone/app/multilingual/tests/robot/test_translate_content.robot
index adc0eb8f..55ae1dae 100644
--- a/src/plone/app/multilingual/tests/robot/test_translate_content.robot
+++ b/src/plone/app/multilingual/tests/robot/test_translate_content.robot
@@ -12,6 +12,7 @@ Test Teardown  Close all browsers
 *** Test Cases ***
 
 Scenario: As an editor I can translate a document
+    [Tags]  unstable
     Given a site owner
       and a document in English
      When I translate the document into Catalan
@@ -54,10 +55,12 @@ a document in English with Catalan translation
 
 I translate the document into Catalan
   Go to  ${PLONE_URL}/en/an-english-document/@@create_translation?language=ca
+  Capture page screenshot
   Input Text  form.widgets.IDublinCore.title  A Catalan Document
   Click Link  Dates  # workaround for of TinyMCE editor field problem
+  Capture page screenshot
   Click button  css=#form-buttons-save
-  
+
   # Wait until page contains  Element creat
   # (Catalan translations not currently available)
 
diff --git a/src/plone/app/multilingual/tests/test_robot.py b/src/plone/app/multilingual/tests/test_robot.py
index decbf2ca..d3b7b115 100644
--- a/src/plone/app/multilingual/tests/test_robot.py
+++ b/src/plone/app/multilingual/tests/test_robot.py
@@ -16,6 +16,8 @@ def test_suite():
     suite = unittest.TestSuite()
     suite.level = ROBOT_TEST_LEVEL
     suite.addTests([
-        layered(robotsuite.RobotTestSuite('robot'), layer=PAM_ROBOT_TESTING),
+        layered(
+            robotsuite.RobotTestSuite('robot', noncritical=['unstable']),
+            layer=PAM_ROBOT_TESTING),
     ])
     return suite


